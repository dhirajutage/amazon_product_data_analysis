create database amazon;
--
create schema amazon_prod;
---
create or replace TABLE amazon.amazon_prod.LND_REVIEWS (
	REVIEWERID VARCHAR(16777216),
	ASIN VARCHAR(16777216),
	HELPFUL VARCHAR(16777216),
	REVIEWTEXT VARCHAR(16777216),
	OVERALL VARCHAR(16777216),
	SUMMARY VARCHAR(16777216),
	UNIXREVIEWTIME VARCHAR(16777216),
	REVIEWTIME VARCHAR(16777216),
	REVIEWERNAME VARCHAR(16777216)
);
---
create or replace TABLE amazon.amazon_prod.DIM_PRODUCT_CATEGORY (
	ID NUMBER(38,0) autoincrement,
	CATEGORY_NAME VARCHAR(200)
);

----
create or replace TABLE  amazon.amazon_prod.FILE_LOAD (
	SOURCE VARCHAR(40),
	DATE_ID DATE,
	TABLE_NAME VARCHAR(40),
	LAYER VARCHAR(10),
	STATUS VARCHAR(9),
	START_TIME TIMESTAMP_NTZ(9),
	END_TIME TIMESTAMP_NTZ(9),
	PROCESSED_ROWS NUMBER(38,0),
	FILE_NAME VARCHAR(200)
);
-----

create or replace TABLE amazon.amazon_prod.LND_METADATA (
	ASIN VARCHAR(16777216),
	SALESRANK VARCHAR(16777216),
	IMURL VARCHAR(16777216),
	CATEGORIES VARCHAR(16777216),
	TITLE VARCHAR(16777216),
	DESCRIPTION VARCHAR(16777216),
	PRICE FLOAT,
	RELATED VARCHAR(16777216),
	BRAND VARCHAR(16777216)
);

----

create or replace TABLE amazon.amazon_prod.REVIEWER_DIM (
	ID NUMBER(38,0) autoincrement,
	REVIEWER_ID VARCHAR(30),
	REVIEWER_NAME VARCHAR(100)
);

--
create or replace TABLE amazon.amazon_prod.STG_DIM_PRODUCT_CATEGORY (
	ID NUMBER(38,0) autoincrement,
	CATEGORY_NAME VARCHAR(40)
);

---
create or replace TABLE amazon.amazon_prod.SYS_CALENDER (
	MY_DATE DATE NOT NULL,
	YEAR NUMBER(38,0) NOT NULL,
	MONTH NUMBER(38,0) NOT NULL,
	MONTH_NAME VARCHAR(3) NOT NULL,
	DAY_OF_MON NUMBER(38,0) NOT NULL,
	DAY_OF_WEEK VARCHAR(9) NOT NULL,
	WEEK_OF_YEAR NUMBER(38,0) NOT NULL,
	DAY_OF_YEAR NUMBER(38,0) NOT NULL
);

---
create or replace TABLE amazon.amazon_prod.LND_REVIEWS (
	REVIEWERID VARCHAR(16777216),
	ASIN VARCHAR(16777216),
	HELPFUL VARCHAR(16777216),
	REVIEWTEXT VARCHAR(16777216),
	OVERALL VARCHAR(16777216),
	SUMMARY VARCHAR(16777216),
	UNIXREVIEWTIME VARCHAR(16777216),
	REVIEWTIME VARCHAR(16777216),
	REVIEWERNAME VARCHAR(16777216)
);

----
create or replace TABLE amazon.amazon_prod.REVIEWS_FACT (
	REVIEW_ID NUMBER(38,0) autoincrement,
	PRODUCT_ID NUMBER(38,0),
	REVIEWERID NUMBER(38,0),
	HELPFUL ARRAY,
	REVIEWTEXT VARCHAR(16777216),
	OVERALL NUMBER(38,0),
	SUMMARY VARCHAR(16777216),
	UNIXREVIEWTIME TIMESTAMP_NTZ(9),
	REVIEW_RETRIEVAL_DATE DATE,
	CREATED_TIMESTAMP TIMESTAMP_NTZ(9),
	LAST_UPDATED_TIMESTAMP TIMESTAMP_NTZ(9)
);
